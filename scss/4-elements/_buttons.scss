/* stylelint-disable no-descending-specificity */

/**
 * Buttons
 * Based on: https://github.com/nhsuk/nhsuk-frontend/blob/master/packages/components/button/_button.scss and
 *   https://github.com/alphagov/govuk-frontend/blob/master/src/govuk/components/button/_index.scss
 */
$button-shadow-size: 4px;

// Colours
$cads-color-button-primary: cads-colors(
  $cads-palette__teal,
  $legacy: $cads-language__primary-button-colour
) !default;
$cads-color-button-primary-hover: cads_colors(
  $cads-palette__teal-dark,
  $legacy: $cads-language__primary-button-hover-colour
) !default;
$cads-color-button-primary-text: cads_colors(
  $cads-palette__white,
  $legacy: $cads-language__primary-button-text-colour
) !default;
$cads-color-button-secondary-hover: cads_colors(
  $cads-palette__blue-light,
  $legacy: $cads-language__secondary-button-hover-colour
) !default;
$cads-color-button-tertiary-dark-background-hover: cads_colors(
  $cads-palette__heritage-blue-dark,
  $legacy: $cads-language__tertiary-button-dark-hover-background-colour
) !default;
$cads-color-button-tertiary-dark-text-hover: cads-colors(
  $cads-palette__white,
  $legacy: $cads-language__tertiary-button-dark-hover-colour
) !default;
$cads-color-button-tertiary-dark-border-hover: cads_colors(
  $cads-palette__white,
  $legacy: $cads-language__tertiary-button-dark-hover-border-colour
) !default;

@mixin cads-button-defaults() {
  @include cads-transition-animation(background);

  appearance: none;
  box-sizing: border-box;
  width: auto;
  text-align: center;
  text-decoration: none;
  cursor: pointer;
  outline: none;
  border: none;
  display: inline-block;
  padding: (cads-rem-to-px($cads-spacing-3) - 1px) $cads-spacing-3;
  margin: 0 0 $cads-spacing-5 0;
  font-weight: $cads-font-weight__bold;
  font-size: 1.125rem;

  @include cads-media-breakpoint-down(sm) {
    font-size: 1rem;
  }
}

/**
 * Shared button styles
 */
.cads-button,
.cads-button__primary,
.cads-button__secondary,
.cads-button__tertiary {
  @include cads-button-defaults;

  border-radius: $cads-border-radius;
  border: solid $cads-border-width-medium $cads-color-button-primary;
  border-bottom: none; // Remove bottom border as box-shadow replaces it
  box-shadow: 0 $button-shadow-size 0 0 $cads-color-button-primary-hover;

  &:focus {
    outline: none;
    color: $cads-color-text-focus;
    border-color: $cads-color-text-secondary;
    background-color: $cads-color-focus;
    box-shadow: 0 $button-shadow-size 0 0 $cads-color-text-secondary;
  }

  &:hover {
    box-shadow: 0 $button-shadow-size 0 0 $cads-color-button-primary-hover;
  }

  &:active {
    transform: translate(0, $button-shadow-size - $cads-border-width-medium);
    box-shadow: 0 $cads-border-width-medium 0 0 $cads-color-button-primary-hover;
  }

  &:hover,
  &:active {
    border-color: $cads-language__primary-button-hover-colour;
  }

  .cads-button__icon-left,
  .cads-button__icon-right {
    // Optically align icons in buttons
    position: relative;
    top: 2px;
  }
}

/**
 * Primary buttons
 */
.cads-button,
.cads-button__primary {
  color: $cads-palette__white;
  background-color: $cads-color-button-primary;

  &:hover,
  &:active {
    color: $cads-palette__white;
    background-color: $cads-color-button-primary-hover;
  }
}

/**
 * Secondary buttons
 */
.cads-button__secondary {
  color: $cads-color-button-primary;
  background-color: $cads-palette__white;
  box-shadow: 0 $button-shadow-size 0 0 $cads-color-button-primary;

  &:hover,
  &:active {
    color: $cads-color-button-primary-hover;
    background-color: $cads-color-button-secondary-hover;
  }
}

/**
 * Tertiary buttons
 */
.cads-button__tertiary {
  font-weight: $cads-font-weight__regular;
  color: $cads-color-button-primary;
  background-color: $cads-palette__white;
  border: solid $cads-border-width-small $cads-color-button-primary;
  box-shadow: none;

  &:focus {
    box-shadow: 0 ($button-shadow-size - $cads-border-width-small) 0 0
      $cads-color-border-focus;
  }

  &:hover,
  &:active {
    background-color: $cads-color-button-secondary-hover;
    color: $cads-color-button-primary-hover;
    box-shadow: none;
  }

  &:active {
    transform: none;
  }
}

%cads-button__tertiary--dark {
  background-color: $cads-color-brand-primary;
  color: $cads-color-brand-primary-contrast;
  border-color: $cads-color-brand-primary-contrast;

  &:hover,
  &:active {
    background-color: $cads-color-button-tertiary-dark-background-hover;
    color: $cads-color-button-tertiary-dark-text-hover;
    border-color: $cads-color-button-tertiary-dark-border-hover;
  }

  &:focus {
    color: $cads-color-text-focus;
    border-color: $cads-color-border-focus;
    background-color: $cads-color-focus;
    box-shadow: 0 $button-shadow-size 0 0 $cads-color-border-focus;
  }
}
