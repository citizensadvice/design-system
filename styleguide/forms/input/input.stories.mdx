import { Meta, Story, Preview, Source } from '@storybook/addon-docs/blocks';
import { translate } from '../../../scripts/story-helpers';

import templateInput from './_input.html.haml';
import templateInputWithHint from './_input-with-hint.html.haml';
import templateInputOptional from './_input-optional.html.haml';
import templateInputWithError from './_input-with-error.html.haml';
import templateInputFixedWidths from './_input-fixed-widths.html.haml';

<Meta title="Forms/Input" />

# Inputs

Use this component when you want to collect textual or numerical data from a user that is not more than a single line.

<Preview>
  <Story
    name="Basic"
    parameters={{ docs: { source: { code: templateInput.raw } } }}
  >
    {(_, options) => translate(templateInput, options)}
  </Story>
</Preview>

Use hint text for help that’s relevant to the majority of users, based on the needs of your service.

<Preview>
  <Story
    name="With hint"
    parameters={{ docs: { source: { code: templateInputWithHint.raw } } }}
  >
    {(_, options) => translate(templateInputWithHint, options)}
  </Story>
</Preview>

<Preview>
  <Story
    name="Optional field"
    parameters={{ docs: { source: { code: templateInputOptional.raw } } }}
  >
    {(_, options) => translate(templateInputOptional, options)}
  </Story>
</Preview>

### Variants: Fixed widths

Help users understand the purpose of the input by making the input size appropriate for the content it’s intended for.

<Preview>
  <Story
    name="Fixed widths"
    parameters={{ docs: { source: { code: templateInputFixedWidths.raw } } }}
  >
    {(_, options) => translate(templateInputFixedWidths, options)}
  </Story>
</Preview>

### With error messages

Error messages are used to highlight where users need to change information. They’re used together with an [error summary](/design-system/styleguide/forms/components-error-summary--page?path=/docs/forms-error-summary--example)

<Preview>
  <Story
    name="With error"
    parameters={{ docs: { source: { code: templateInputWithError.raw } } }}
  >
    {(_, options) => translate(templateInputWithError, options)}
  </Story>
</Preview>

## Implementation

You must always have a label associated with the input element.

Use the correct input type so the purpose of each input field can be determined. When collecting information about a user, use the autocomplete attribute to help users complete forms more quickly. [Read more about input purpose](https://www.w3.org/WAI/WCAG21/Understanding/identify-input-purpose.html) at WCAG 2.1.

> The following will need more research:
>
> - Using type=number or inputmode=numeric What does do for assistive technologies?
> - When should we use autocomplete and when should we turn it off?
> - Should we be able to group text inputs into fieldsets? Eg when capturing addresses?

## Haml template options

The Haml partial takes an `input` hash with the following properties:

| properties      | Description                                                               |
| --------------- | ------------------------------------------------------------------------- |
| `name`          | Required, field name                                                      |
| `label`         | Required, label text                                                      |
| `hint`          | Optional, hint text                                                       |
| `optional`      | Optional, boolean flag to mark the field as optional                      |
| `error_message` | Optional, error message for the field                                     |
| `has_error`     | Optional, boolean flag to mark the field as having an error               |
| `size`          | Optional, fixed character width size. One of: `2ch`, `4ch`, `8ch`, `16ch` |
| `value`         | Optional, field value                                                     |
