import { Story, Preview } from '@storybook/addon-docs';

# Checkbox groups

A checkbox group allows a user to select one or more options from a group of choices.

<Preview>
  <Story id="forms-checkbox-group--basic" />
</Preview>

## When to use

Use a checkbox group when a user can select one or more options from a list of choices.

## When not to use

Do not use a checkbox group if the user:

- should only be able to select one choice from a list of options (use a [radio group](/docs/forms-radio-group--basic#radio-groups) for this)
- there is only one checkbox in the list of options, for example agreeing to terms and conditions (use [checkbox](/docs/forms-checkbox--basic) for this)

## How it works

### With hint

Use hint text for help that’s relevant to the majority of users, based on the needs of your service.

<Preview>
  <Story id="forms-checkbox-group--with-hint" />
</Preview>

### With optional field marker

If a selection is not required, use the optional marker.

<Preview>
  <Story id="forms-checkbox-group--optional-field" />
</Preview>

### With error message

Error messages are used to highlight where users need to change information. They’re used together with an [error summary](/design-system/styleguide/forms/components-error-summary--page?path=/docs/forms-error-summary--example).

<Preview>
  <Story id="forms-checkbox-group--with-error" />
</Preview>

## Implementation

You must always have a label associated with the input element.

The components we provide use wrap checkbox groups in a fieldset. In this context the 'label' is typically the fieldset legend, as every checkbox option is a label + input in its own right.

## Using with Rails

If you are using the `citizens_advice_components` gem, you can call the component from within a following the example below.

The checkbox buttons themselves can be defined using a simple hash, and passed into the `CheckboxGroup` component like this:

```rb
- my_checkbox_buttons = [
  { label: "Option 1", value: "1", checked: true },
  { label: "Option 2", value: "2" },
  { label: "Option 3", value: "3", "data-testid": "my-test-id" }
]

= render CitizensAdviceComponents::CheckboxGroup.new(
    legend: "Example checkbox buttons",
    name: "checkbox-buttons",
    options: {
      optional: true
    }
  ) do |c|
    c.inputs(my_checkbox_buttons)
  end
```

### Additional attributes (View component only)

Any additional key/value pairs (beyond `label` and `value`) in your checkbox button definition will be added to the input.

<Preview>
  <Story id="forms-checkbox-group--attributes" />
</Preview>

### View Component Options

| Property               | Description                                                          |
| ---------------------- | -------------------------------------------------------------------- |
| `name`                 | Required, field name                                                 |
| `label`                | Required, the text for the label associated with the input           |
| `options`              | Optional, a hash with one or more of the following values:           |
| &rarr; `hint`          | Optional, hint text for the input                                    |
| &rarr; `error_message` | Optional, an error_message for the input                             |
| &rarr; `optional`      | Optional, boolean indicating the field is optional (ie not required) |
