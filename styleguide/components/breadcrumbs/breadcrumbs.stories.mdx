import { Meta, Story, Preview, Source } from '@storybook/addon-docs/blocks';
import { translate } from '../../story-helpers';

import templateDefault from './_default.html.haml';
import templateNoCollapse from './_no-collapse.html.haml';
import templateSiteWide from './_site_wide.html.haml';

<Meta
  title="Components/Breadcrumbs"
  decorators={[(Story) => `<div style="max-width: 800px">${Story()}</div>`]}
/>

# Breadcrumbs

Breadcrumbs show users the current location on the website and enable them to quickly move up to a parent level.

## When to use

Use breadcrumbs when a page is located in a hierarchy of at least two levels.

## When not to use

Do not use breadcrumbs on a website with a flat hierarchy or to show the journey through a transaction. If a page is taking users through a multistep process, use the "[Step-by-step Sidebar Navigation](https://www.figma.com/file/J9qfbS9n1pUM2dpRQnTXUD/Design-system-2.0?node-id=813%3A132)" (or consider if a progress indicator is needed) instead.

## How it works

Breadcrumbs should be placed on the top left of each page and below "Global Navigation". They should start with a link to the home page and end with the current page title. Page titles of parent pages should be linked; the current should not have a link.

On the small breakpoint, breadcrumbs show the previous parent level as a link by default. You can explicity set this behaviour by passing in
`collaspe` as the type.

<Preview>
  <Story
    name="Breadcrumbs (default)"
    parameters={{ docs: { source: { code: templateDefault.raw } } }}
  >
    {(_, options) => translate(templateDefault, options)}
  </Story>
</Preview>

> Note: the breadcrumbs component on the small breakpoint is currently experimental because more research is needed to validate it.

## Accessibility

### Keyboard

Users should be able to tab between all links using their keyboard.

### Screen reader

Make sure your breadcrumb items reflect the page titles exactly for screen readers.

## Site level breadcrumbs

When breadcrumbs are displayed across the top of site content they must be wrapped in a `.cads-breadcrumb-wrapper`, this
will correctly style and align the breadcrubs with site content. See sample pages for details.

<Preview>
  <Story
    name="Breadcrumbs (site wide)"
    parameters={{ docs: { source: { code: templateSiteWide.raw } } }}
  >
    {(_, options) => translate(templateSiteWide, options)}
  </Story>
</Preview>

## Variation â€“ No collapse

To prevent the default collapse behaviour on the small breakpoint, pass `"type" => "no-collapse"`. For example: in search results.

<Preview>
  <Story
    name="Breadcrumbs (No collapse)"
    parameters={{ docs: { source: { code: templateNoCollapse.raw } } }}
  >
    {(_, options) => translate(templateNoCollapse, options)}
  </Story>
</Preview>

## In a search result

When shown in a search result, the breadcumbs do not show the home page and do not have a horizontal rule underneath.

## Haml template options

The Haml partial takes a `breadcrumb` hash, which has the following properties:

| Property           | Description                                            |
| ------------------ | ------------------------------------------------------ |
| `type`             | Optional, one of: `collapse` (default), `no-collapse`  |
| `breadcrumb_links` | Required, an array of hashes, each with the following: |
| `link[url]`        | &rarr; Required, url for the breadcrumb link           |
| `link[title]`      | &rarr; Required, title for the breadcrumb link         |

For example:

<Source dark="true" language="haml" code={templateNoCollapse.raw} />
