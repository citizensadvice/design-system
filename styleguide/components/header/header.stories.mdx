import { Meta, Source, Story, Preview } from '@storybook/addon-docs/blocks';
import { translate } from '../../../scripts/story-helpers';

import initHeader from '../../../src/js/header';
import templateDefault from './_default.html.haml';
import linksVariable from '!!raw-loader!./links_example.rb';

<Meta
  title="Components/Header"
  decorators={[
    (Story) => {
      setTimeout(() => initHeader());
      return Story();
    },
  ]}
/>

# Header

<Preview>
  <Story
    name="Default"
    parameters={{ docs: { source: { code: templateDefault.raw } } }}
  >
    {(_, options) => translate(templateDefault, options)}
  </Story>
</Preview>

## Haml template options

The Haml partial the following locals:

| Property             | Description                                             |
| -------------------- | ------------------------------------------------------- |
| `root_path`          | Required, root path for the logo home link              |
| `links`              | Optional, an array made up of links (see example below) |
| `sign_in_out`        | Optional, a hash with the following:                    |
| `sign_in_out[url]`   | &rarr; Required, url for the sign in link               |
| `sign_in_out[title]` | &rarr; Required, title for the sign in link             |
| `search_action_url`  | Required, URL for the search form                       |

### `links` template option

The links variable allows you to insert links to the left of the `sign_in_out` link:

<Source language="ruby" dark="true" code={linksVariable} />

## Customising the logo

You can customise the logo by overriding the `.cads-logo` class within your own stylesheet.

The logo provided with this design system covers large and small responsive styles, a print version as well as a Welsh translated version of each (via the `.cads-lang-cy` class). Be sure to cover all of these cases, or override them if not needed.

See `@citizensadvice/design-system/scss/6-components/_logo.scss` for the specific implementation.

## JavaScript behaviour

If you plan to use this component you will need to initialise the following JavaScript:

```js
import initHeader from '@citizensadvice/design-system/lib/header';
initHeader();
```
