<div class="cads-form-field<% if error? %> cads-form-field--has-error<% end %>">
  <% if error? %><div class="cads-form-field__error-marker"></div><% end %>
  <div class="cads-form-field__content">
    <%= tag.fieldset(class: fieldset_classes) do %>
      <legend class="cads-form-field__label<% if page_heading? %> cads-form-field__label--with-heading<% end %>">
        <% if page_heading? %>
          <h1 class="cads-page-title"><%= legend %></h1>
        <% else %>
          <%= legend %>
          <% if optional? %>
            <span class="cads-form-field__optional"><%= "(#{t('citizens_advice_components.input.optional')})" %></span>
          <% end %>
        <% end %>
      </legend>
      <% if hint? %>
        <p class="cads-form-field__hint"><%= hint %></p>
      <% end %>
      <% if error? %>
        <p class="cads-form-field__error-message" <% if error? %> id="<%= error_id %>"<% end %>><%= error_message %></p>
      <% end %>
      <% inputs.each_with_index do |input, index| %>
        <div class="cads-form-group__item">
          <%= tag.input(class: "cads-form-group__input", **input.attributes(name, id, index, error: error?)) %>
          <label class="cads-form-group__label" for="<%= input.attributes(name, id, index)[:id] %>">
            <%= input.label %>
          </label>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
